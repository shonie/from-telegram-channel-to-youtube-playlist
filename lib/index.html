<html>
  <head>
    <script src="https://apis.google.com/js/client:platform.js?onload=start" async defer></script>
    <script>
      const scopes = [
        'https://www.googleapis.com/auth/youtube',
        'https://www.googleapis.com/auth/youtube.force-ssl',
        'https://www.googleapis.com/auth/youtubepartner',
        'https://www.googleapis.com/auth/youtube.readonly',
        'https://www.googleapis.com/auth/youtube.upload',
      ]
      function start() {
        gapi.load('auth2', () => {
          const clientId = '628164575188-a1gp4413e3a6mp6of2hbtuivdgcdev09.apps.googleusercontent.com';
          const auth2 = gapi.auth2.init({
            scope: scopes.join(' '),
            client_id: clientId,
          });
          auth2.grantOfflineAccess().then(signInCallback);
        });
      }
      function signInCallback(authResult) {
        if (authResult.code) {
          fetch('/code', {
            method: 'POST',
            headers: {
              'X-Requested-With': 'XMLHttpRequest',
              'Content-Type': 'application/json',
              Accept: 'application/json',
            },
            body: JSON.stringify(authResult),
          });
        } else {
          console.log('Error', authResult);
        }
      }
    </script>
  </head>
</html>
